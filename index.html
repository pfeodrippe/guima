<body style="background-color: #EEEEEE">
  <script src="vendors/codemirror/lib/codemirror.js"></script>
  <link rel="stylesheet" href="vendors/codemirror/lib/codemirror.css">
  <script src="vendors/codemirror/mode/ruby/ruby.js"></script>

  <script>
    var evalHandler =
        (cm) => {
            fetch('http://localhost:8080/',
                  {method: 'POST',
                   mode: 'cors',
                   body: JSON.stringify({'input': cm.getValue()}),
                   headers: new Headers({'accept': 'application/json',
                                         'content-type': 'application/json'})})
                .then(response => response.json())
                .then(
                    function(data) {
                        if('data' in data)
                            console.log(data.data);
                        else
                            console.log(data.error.message);
                    })
                .catch(error => console.log(error))
        };

    var cm = CodeMirror(document.body, {
        mode: 'ruby',
        viewportMargin: Infinity,
        extraKeys: {
            'Shift-Enter': evalHandler,
            'Ctrl-Enter': evalHandler
        },
    });
    cm.setSize("50%", "auto");
  </script>
</body>
